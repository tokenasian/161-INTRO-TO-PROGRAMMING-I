# Author: Matthew Armstrong
# Date: 08/05
# Description:
class AddThreeGame:
    def __init__(self):
        self._first_list = []
        self._second_list = []
        self._first_player = 0
        self._second_player = 0
        self._input_number = []
        self._valid_choices = [1, 2, 3, 4, 5, 6, 7, 8, 9]
        self._current_state = "FIRST_WON"

    def get_current_state(self):
        return self._current_state

    def make_move(self, current_player, user_input):
        if user_input not in self._valid_choices:
            return False

        if user_input < 1 or user_input > 9:
            return False

        if (self._first_player >= 15 and self._second_player >= 15) or len(self._valid_choices) == 9:
            self._current_state = "DRAW"

        if sum(self._first_list) == 15:
            self._current_state = "FIRST_WON"
        if sum(self._second_list) == 15:
            self._current_state = "SECOND_WON"

        if current_player == "first":
            self._input_number.append(user_input)
            self._first_list.append(user_input)
            self._valid_choices.remove(user_input)
            return True
        else:
            self._input_number.append(user_input)
            self._second_list.append(user_input)
            self._valid_choices.remove(user_input)
            return True

    def get_current_player_input(self, current_player):
        if current_player == "first":
            user_input = int(input("First: "))
            if game.make_move("first", user_input):
                if self.check_if_winner():
                    if sum(self._first_list) == 15:
                        self._current_state = "FIRST_WON"
                else:
                    self.get_current_player_input("second")

            else:
                print("That entry is invalid. Try again.")
                self.get_current_player_input(current_player)

        if current_player == "second":
            user_input = int(input("Second: "))
            if game.make_move("second", user_input):
                if self.check_if_winner():
                    if sum(self._second_list) == 15:
                        self._current_state = "SECOND_WON"
                else:
                    self.get_current_player_input("first")
            else:
                print("That entry is invalid. Try again.")
                self.get_current_player_input(current_player)

    def check_if_winner(self):
        if sum(self._first_list) == 15 and sum(self._second_list) == 15:
            return True
        else:
            return False

    def start(self):
        self.get_current_player_input("first")


game = AddThreeGame()
game.start()

state_game = game.get_current_state()

if state_game == "UNFINISHED":
    print("We have unfinished business, come back for more")

if state_game == "FIRST_WON":
    print("Player 1 is the winner. Player 2 is a loser.")

if state_game == "SECOND_WON":
    print("Player 2 is the winner. Player 1 is a loser.")

if state_game == "DRAW":
    print("Tie.")

